# 视频目标检测系统

一个基于深度学习的视频目标检测系统，支持实时视频流分析和上传视频分析，提供多模型支持和目标搜索功能。

## 功能特点

- **实时视频流分析**
  - 支持摄像头实时视频流分析
  - 实时显示分析结果和帧率
  - 可随时开始/停止分析

- **视频文件分析**
  - 支持上传本地视频文件
  - 自动提取关键帧进行分析
  - 显示分析进度和结果

- **多模型支持**
  - 支持多种深度学习模型
  - 可配置模型参数
  - 灵活切换不同模型

- **目标搜索**
  - 支持添加多个搜索目标
  - 实时显示匹配结果
  - 可设置匹配阈值

- **结果展示**
  - 实时显示分析结果
  - 支持结果筛选和排序
  - 提供详细的分析报告

## 技术栈

- 前端：HTML5, CSS3, JavaScript
- 后端：Python, Flask
- 深度学习：PyTorch, OpenCV
- 数据库：SQLite

## 安装步骤

1. 克隆项目
```bash
git clone [项目地址]
cd [项目目录]
```

2. 安装依赖
```bash
pip install -r requirements.txt
```

3. 配置环境变量
```bash
# Windows
set FLASK_APP=main.py
set FLASK_ENV=development

# Linux/Mac
export FLASK_APP=main.py
export FLASK_ENV=development
```

4. 初始化数据库
```bash
flask init-db
```

5. 启动应用
```bash
flask run
```

## 使用说明

1. **实时视频流分析**
   - 点击"开始摄像头"按钮启动视频流
   - 添加搜索目标
   - 点击"开始分析"按钮开始分析
   - 分析结果会实时显示在右侧面板

2. **视频文件分析**
   - 点击"选择视频"按钮上传视频文件
   - 添加搜索目标
   - 点击"开始分析"按钮开始分析
   - 等待分析完成，查看结果

3. **目标搜索**
   - 在搜索目标输入框中输入目标名称
   - 点击"添加"按钮添加目标
   - 可以添加多个搜索目标
   - 设置匹配阈值（可选）

4. **结果查看**
   - 分析结果会显示在右侧面板
   - 可以按时间、置信度等条件筛选
   - 点击结果项可以查看详细信息

## 目录结构

```
.
├── main.py              # 主程序入口
├── requirements.txt     # 项目依赖
├── static/             # 静态资源
│   ├── css/           # 样式文件
│   ├── js/            # JavaScript文件
│   └── models/        # 模型文件
├── templates/          # HTML模板
├── uploads/           # 上传文件目录
└── frames/            # 视频帧存储目录
```

## 注意事项

1. 确保系统已安装 Python 3.8 或更高版本
2. 首次运行前需要安装所有依赖
3. 确保有足够的磁盘空间存储视频帧
4. 建议使用现代浏览器（Chrome、Firefox、Edge等）
5. 实时视频分析需要摄像头支持

## 常见问题

1. **摄像头无法启动**
   - 检查摄像头是否被其他程序占用
   - 确认浏览器有摄像头访问权限
   - 尝试重新插拔摄像头

2. **分析速度较慢**
   - 检查系统资源占用情况
   - 可以调整分析间隔时间
   - 考虑使用更轻量级的模型

3. **结果不准确**
   - 调整匹配阈值
   - 确保搜索目标描述准确
   - 检查视频质量和光线条件

## 更新日志

### v1.0.0 (2024-03-xx)
- 初始版本发布
- 支持实时视频流分析
- 支持视频文件分析
- 支持多目标搜索
- 提供基础的结果展示功能

## 贡献指南

欢迎提交 Issue 和 Pull Request 来帮助改进项目。在提交代码前，请确保：

1. 代码符合项目规范
2. 添加必要的注释和文档
3. 通过所有测试
4. 更新相关文档

## 许可证

本项目采用 MIT 许可证。详见 [LICENSE](LICENSE) 文件。
